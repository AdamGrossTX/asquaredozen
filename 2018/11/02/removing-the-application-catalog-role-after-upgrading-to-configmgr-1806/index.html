<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=keyword content="ConfigMgr Microsoft MVP Gross Intune Windows">
<meta name=viewport content="width=device-width">
<meta name=description content="A.Gross Blog | Adam Gross Enterprise Mobility MVP">
<link rel="shortcut icon" href=/img/favicon.ico>
<title>Removing the Application Catalog Role after Upgrading to ConfigMgr 1806-A Square Dozen | A. Gross Blog</title>
<link rel=canonical href=/2018/11/02/removing-the-application-catalog-role-after-upgrading-to-configmgr-1806/>
<link rel=stylesheet href=/css/style.css>
<link rel=stylesheet href=https://www.asquaredozen.com/css/custom.css>
<script src=https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js></script>
<script src=https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js></script>
<script src=https://www.asquaredozen.com/js/jquery.slicknav.js></script>
<script src=https://www.asquaredozen.com/js/asd_SlickNav_Mobile.js></script>
<script src=https://www.asquaredozen.com/js/custom.js></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DYVXTRTXN4"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-DYVXTRTXN4',{anonymize_ip:!1})}</script>
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://www.asquaredozen.com/img/ASquareDozen-Logo_Horiz_Twitter.png">
<meta name=twitter:title content="Removing the Application Catalog Role after Upgrading to ConfigMgr 1806">
<meta name=twitter:description content="If you have been keeping up with SCCM/ConfigMgr release notes, you will have seen that in 1806, you no longer need to have the Application Catalog Role installed in order to enable User Available applications in Software Center (if you didn&rsquo;t already know, yeah, that was a requirement previously). If you were like me, this was one of your first actions after upgrading to 1806. Unfortunately, there appears to be a bug with removing the role that causes clients to stop seeing User Available software in Software Center.">
<meta property="og:title" content="Removing the Application Catalog Role after Upgrading to ConfigMgr 1806">
<meta property="og:description" content="If you have been keeping up with SCCM/ConfigMgr release notes, you will have seen that in 1806, you no longer need to have the Application Catalog Role installed in order to enable User Available applications in Software Center (if you didn&rsquo;t already know, yeah, that was a requirement previously). If you were like me, this was one of your first actions after upgrading to 1806. Unfortunately, there appears to be a bug with removing the role that causes clients to stop seeing User Available software in Software Center.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://www.asquaredozen.com/2018/11/02/removing-the-application-catalog-role-after-upgrading-to-configmgr-1806/"><meta property="og:image" content="https://www.asquaredozen.com/img/ASquareDozen-Logo_Horiz_Twitter.png"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2018-11-02T21:56:38+00:00">
<meta property="article:modified_time" content="2018-11-02T21:56:38+00:00"><meta property="og:site_name" content="A Square Dozen | A. Gross Blog">
</head>
<body class="home blog">
<div id=asd-container>
<div id=top-bar>
<div class=container>
<div id=nav-wrapper>
<ul class=menu id=menu-top-menu>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=/>Home</a>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=#>
<span>Feature Updates</span>
</a>
<ul class="sub-menu menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=/2019/08/22/windows-10-feature-updates-leveraging-setupdiag-for-better-reporting/>Windows 10 Feature Updates – Leveraging SetupDiag for Better Reporting</a>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=/2019/10/05/windows-10-feature-updates-the-challenge-of-servicing-in-the-enterprise/>Windows 10 Feature Updates – The Challenge of Servicing in the Enterprise</a>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=/2019/08/25/windows-10-feature-updates-using-custom-action-scripts/>Windows 10 Feature Updates – Using Custom Action Scripts</a>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=/2019/08/25/windows-10-feature-updates-using-setupconfig-ini-to-manage-feature-updates-in-the-enterprise/>Windows 10 Feature Updates – Using Setupconfig.ini to Manage Feature Updates in the Enterprise</a>
</li>
</ul>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=/2019/02/12/the-system-center-configuration-manager-adminservice-guide/>
<span>ConfigMgr AdminService</span>
</a>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=#>
<span>802.1x for OSD</span>
</a>
<ul class="sub-menu menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=/2018/07/29/configuring-802-1x-authentication-for-windows-deployment-part-1-building-an-802-1x-computer-authentication-script/>Part 1 – Building an 802.1x Computer Authentication Script</a>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=/2018/07/29/configuring-802-1x-authentication-for-windows-deployment-part-2-building-an-802-1x-enabled-winpe-boot-image/>Part 2 – Building an 802.1x Enabled WinPE Boot Image</a>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=/2018/07/29/configuring-802-1x-authentication-for-windows-deployment-part-3-integrating-802-1x-authentication-into-a-bare-metal-task-sequence/>Part 3 – Integrating 802.1x Authentication into a Bare Metal Task Sequence</a>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=/2018/07/29/configuring-802-1x-authentication-for-windows-deployment-part-4-integrating-802-1x-authentication-into-an-in-place-upgrade-task-sequence/>Part 4 – Integrating 802.1x Authentication into an In-Place Upgrade Task Sequence</a>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=/2018/09/29/configuring-802-1x-authentication-for-windows-deployment-part-5-dynamic-whitelisting-using-the-cisco-ise-external-restful-service/>Part 5 – Dynamic Whitelisting using the Cisco ISE External RESTful Service</a>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=/2018/07/29/configuring-802-1x-authentication-for-windows-deployment-tips-and-tricks/>Tips and Tricks</a>
</li>
</ul>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=#>
<span>Task Sequence Hacks</span>
</a>
<ul class="sub-menu menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=/2018/11/29/building-a-better-task-sequence/>Building a Better Task Sequence</a>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=/2019/04/30/building-a-smarter-task-sequence/>Building a Smarter Task Sequence</a>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=/2018/12/14/building-an-even-better-task-sequence/>Building An Even Better Task Sequence</a>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=/2018/07/16/clearing-local-group-policies-during-an-windows-7-to-10-in-place-upgrade-task-sequence/>Clearing Local Group Policies during an Windows 7 to 10 In-Place Upgrade Task Sequence</a>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=/2018/10/03/debugging-sccm-configmgr-task-sequences-on-the-fly/>Debugging SCCM/ConfigMgr Task Sequences on the Fly</a>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=/2018/07/11/dynamically-updating-unattend-xml-during-an-osd-task-sequence-using-mdt-variables-and-zti-scripts/>Dynamically Updating Unattend.XML during an OSD Task Sequence using MDT Variables and ZTI Scripts.</a>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=/2018/06/14/triggering-configmgr-client-actions-from-a-task-sequence/>Triggering ConfigMgr Client Actions from a Task Sequence</a>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=/2018/08/27/using-sccm-task-sequence-variables-as-scripts/>Using SCCM Task Sequence Variables as Scripts</a>
</li>
</ul>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=https://github.com/AdamGrossTX>
<span>GitHub</span>
</a>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=#>
<span>MORE></span>
</a>
<ul class="sub-menu menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=/about/>About</a>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=/consulting/>Consulting</a>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
<a href=/contact/>Contact</a>
</li>
</ul>
</li>
</ul>
</div>
<div id=top-search>
<a href=# class=search><i class="fa fa-search"></i></a>
<div class=show-search>
<form role=search method=get action=https://www.google.com/search id=searchform>
<input type=search placeholder="Search and hit enter..." name=q id=q title="Search and hit enter...">
<input type=hidden name=sitesearch value=https://www.asquaredozen.com>
<button type=submit value=Search>
</form>
</div>
</div>
<div class=menu id=menu-mobile></div>
</div>
</div>
<header id=header class=noslider>
<div class=container>
<div id=logo>
<h1><a href=https://www.asquaredozen.com><img src=/img/A-Square-Dozen-Logo-BlogHeader-1.png alt="A Square Dozen"></a></h1>
</div>
</div>
</header>
<div class=container>
<div id=content>
<div id=main class=fullwidth>
<article class="post type-post status-publish format-standard has-post-thumbnail hentry">
<div class=post-header>
<h1>Removing the Application Catalog Role after Upgrading to ConfigMgr 1806</h1>
<span class=post-date>November 2, 2018</span>
</div>
<div class=post-entry>
<p>If you have been keeping up with <a href=https://docs.microsoft.com/sccm/core/plan-design/changes/whats-new-in-version-1806#software-center-infrastructure-improvements>SCCM/ConfigMgr release notes</a>, you will have seen that in 1806, you no longer need to have the Application Catalog Role installed in order to enable User Available applications in Software Center (if you didn&rsquo;t already know, yeah, that was a requirement previously). If you were like me, this was one of your first actions after upgrading to 1806. Unfortunately, there appears to be a bug with removing the role that causes clients to stop seeing User Available software in Software Center. I&rsquo;m going to walk through the removal process as well as the remediation of the client issue.</p>
<h2 id=removing-the-application-catalog-role>Removing the Application Catalog Role</h2>
<p>Simply go into your ConfigMgr console and navigate to <strong>\Administration\Overview\Site Configuration\Servers and Site System Roles</strong>. Select each of the Application Catalog Roles then select Remove Role.
<div class=image>
<figure>
<a href=2018-11-02_16-26-43-1.jpg target=_blank>
<img src=2018-11-02_16-26-43-1.jpg alt="A Square Dozen Image">
</a>
</figure>
</div></p>
<p>You should be able to watch <strong>smscomp.log</strong> to see the uninstall progress. You should see an entry like this showing that the role is being removed then several more actions that run to switch over the role to the new 1806 functionality. It should happen very quickly.</p>
<p><code>Starting service SMS_SERVER_BOOTSTRAP_CM01 with command-line arguments "TST C:\Microsoft Configuration Manager /deinstall C:\Microsoft Configuration Manager\bin\x64\rolesetup.exe SMSAWEBSVC "...</code></p>
<p>If your client settings are pointing to a custom Application Catalog URL, be sure change it to default. Your setting should look like this:</p>
<p><div class=image>
<figure>
<a href=2018-11-02_16-35-34.png target=_blank>
<img src=2018-11-02_16-35-34.png alt="A Square Dozen Image">
</a>
</figure>
</div></p>
<p>That&rsquo;s it. You&rsquo;re now using the cool new 1806 Application service (I honestly don&rsquo;t know the name is, if there is one.)</p>
<h2 id=checking-your-client-for-issues>Checking your Client for Issues</h2>
<p>At this point, you should be able to open Software Center on your client that had User Available applications in it prior to the change and the applications should be there just like before. You can confirm the change by checking the SCClient_XXXX.log on the client to see that Software Center is pointing to the new web service.</p>
<p>Working Client - Entry on SCClient_DOMAIN@USERNAME_2.LOG</p>
<p><code>Using endpoint Url: http://CM01.asdlab.net:80/CMUserService_WindowsAuth, Windows authentication (Microsoft.SoftwareCenter.Client.Data.ACDataSource RefreshLocalSettingsAsync)</code></p>
<p>Broken Client - Entries in SCClient_DOMAIN@USERNAME_2.LOG and PolicyAgent.log</p>
<div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=1><a style=outline:none;text-decoration:none;color:inherit href=#1> 1</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=2><a style=outline:none;text-decoration:none;color:inherit href=#2> 2</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=3><a style=outline:none;text-decoration:none;color:inherit href=#3> 3</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=4><a style=outline:none;text-decoration:none;color:inherit href=#4> 4</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=5><a style=outline:none;text-decoration:none;color:inherit href=#5> 5</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=6><a style=outline:none;text-decoration:none;color:inherit href=#6> 6</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=7><a style=outline:none;text-decoration:none;color:inherit href=#7> 7</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=8><a style=outline:none;text-decoration:none;color:inherit href=#8> 8</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=9><a style=outline:none;text-decoration:none;color:inherit href=#9> 9</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=10><a style=outline:none;text-decoration:none;color:inherit href=#10>10</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=11><a style=outline:none;text-decoration:none;color:inherit href=#11>11</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=12><a style=outline:none;text-decoration:none;color:inherit href=#12>12</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=13><a style=outline:none;text-decoration:none;color:inherit href=#13>13</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=14><a style=outline:none;text-decoration:none;color:inherit href=#14>14</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=15><a style=outline:none;text-decoration:none;color:inherit href=#15>15</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=16><a style=outline:none;text-decoration:none;color:inherit href=#16>16</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=17><a style=outline:none;text-decoration:none;color:inherit href=#17>17</a>
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=color:#998;font-style:italic>#SCClient_DOMAIN@USERNAME_2.LOG:</span>
<span style=color:teal>GetCategoryValuesAsync: There was no endpoint listening at http://cm01/CMApplicationCatalog/applicationviewservice.asmx that could accept the message. This is often caused by an incorrect address or SOAP action. See InnerException, if present, for more details.. Unable to fetch user categories, no endpoint found. (Microsoft.SoftwareCenter.Client.ViewModels.SoftwareListViewModel+&lt;LoadAppCatalogApplicationsAsync&gt;d__145 at MoveNext)</span>

<span style=color:#998;font-style:italic>#PolicyAgent.log:</span>
<span style=color:teal>Failed to compile rule &#34;{Rule_WRC10000}&#34;: 0x8000ffff</span>

<span style=color:teal>Raising event:</span>
<span style=color:teal>instance of CCM_PolicyAgent_PolicyCompileFailed</span>
<span style=color:teal>{</span>
	<span style=color:teal>ClientID</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#d14>&#34;GUID:FAD43163-1038-43B3-BB15-9837DEEE4404&#34;;
</span><span style=color:#d14>	DateTime = &#34;20181102204614.541000+000&#34;;
</span><span style=color:#d14>	PolicyNamespace = &#34;\\\\.\\ROOT\\ccm\\policy\\machine\\requestedconfig&#34;;
</span><span style=color:#d14>	PolicyPath = &#34;CCM_Policy_Policy5.PolicyID=\&#34;WRC10000\&#34;,PolicyVersion=\&#34;4.00\&#34;,PolicySource=\&#34;SMS:TST\&#34;&#34;;
</span><span style=color:#d14>	ProcessID = 1684;
</span><span style=color:#d14>	ThreadID = 8324;
</span><span style=color:#d14>	Win32ErrorCode = 2147549183;</span>
<span style=color:teal>};</span>
</code></pre></td></tr></table>
</div>
</div><p>If you see the error entries, then read on, otherwise, you should be installing Applications from Software Center, not reading a blog!!</p>
<h2 id=remediating-client-issues>Remediating Client Issues</h2>
<p>The fix that <a href=https://twitter.com/acjuelich>Adam Juelich </a>and I have settled is to make a change in the client settings policy (he toggled a setting in the Software Center settings) then try again on the client. You MAY need to update client policies, but in our testing, that wasn&rsquo;t necessary. Simply close and re-open Software Center and the apps reappeared and the errors went away.</p>
<h2 id=summary>Summary</h2>
<p>We have reached out to the <a href=https://twitter.com/acjuelich/status/1058357824571478017>ConfigMgr product group</a> and they are looking into the issue. In the meantime, just change a client setting and see if you get it working. Please send me a note or message me on Twitter if you find any issues or other info about this issue.</p>
</div>
<div class=post-share>
<div class="post-share-box share-comments">
hello
</div>
</div>
<div class=post-author>
</div>
<comments id=comments>
<script src=https://utteranc.es/client.js repo=AdamGrossTX/asquaredozen issue-term=title label="blog comment" theme=github-light crossorigin=anonymous async></script>
</comments>
</article>
</div>
</div>
</div>
<footer id=footer>
<div class=container>
<div id=footer-copyright>
<p class=copyright>&copy; 2022 Adam Gross - https://www.asquaredozen.com - A Square Dozen</a></p>
</div>
</div>
</footer>
</div>
</body>
</html>