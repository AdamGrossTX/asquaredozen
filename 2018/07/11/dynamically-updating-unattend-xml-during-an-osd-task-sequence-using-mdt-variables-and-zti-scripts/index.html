<!DOCTYPE html>
<html lang="en-us">
	    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="keyword"  content="ConfigMgr Microsoft MVP Gross Intune Windows">
        <meta name="viewport" content="width=device-width">
        <link rel="shortcut icon" href="/img/favicon.ico">
        <title>Dynamically Updating Unattend.XML during an OSD Task Sequence using MDT Variables and ZTI Scripts.-A Square Dozen | A. Gross Blog</title>

        <meta name="description" content="A.Gross Blog | Adam Gross Enterprise Mobility MVP">
        

        
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DYVXTRTXN4"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-DYVXTRTXN4', { 'anonymize_ip': false });
}
</script>

        <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://blog.asquaredozen.com/105"/>

<meta name="twitter:title" content="Dynamically Updating Unattend.XML during an OSD Task Sequence using MDT Variables and ZTI Scripts."/>
<meta name="twitter:description" content="While trying to set the KeyboardLocale in my ConfigMgr/SCCM Task Sequence, I found that my settings weren&rsquo;t getting updated during the Task Sequence. I used to think that custom Unattend.XML that you include in your Task Sequence would be used as-is. I was wrong. I did a bit of digging and here&rsquo;s what I discovered.
FYI: I&rsquo;m using ConfigMgr/SCCM with MDT integrated and I&rsquo;m using an MDT Task Sequence built in ConfigMgr as the basis for this discussion."/>


        <link rel="canonical" href="/2018/07/11/dynamically-updating-unattend-xml-during-an-osd-task-sequence-using-mdt-variables-and-zti-scripts/">
        <link rel="stylesheet" href="/css/style.css">
        <link rel="stylesheet" href="/css/code.css">
        

        
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" rel="stylesheet" type="text/css">
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>

        <script src="js/asd.js"></script>

        
        

        
    </head>
		<body class="home blog">
			<div id="asd-container">
				
				
<div id="top-bar">
    <div class="container">
        <div id="nav-wrapper">
                <ul class="menu" id="menu-top-menu">
                    <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                        <a href="/">Home</a>
                    </li>
                    
                    
                        
                            <li class=" menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                <a href="#">
                                    
                                    <span>Feature Updates</span>
                                </a>
                                <ul class="sub-menu menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                    
                                        <li class=" menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                            <a href="/2019/08/22/windows-10-feature-updates-leveraging-setupdiag-for-better-reporting/">Windows 10 Feature Updates – Leveraging SetupDiag for Better Reporting</a>
                                        </li>
                                    
                                        <li class=" menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                            <a href="/2019/10/05/windows-10-feature-updates-the-challenge-of-servicing-in-the-enterprise/">Windows 10 Feature Updates – The Challenge of Servicing in the Enterprise</a>
                                        </li>
                                    
                                        <li class=" menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                            <a href="/2019/08/25/windows-10-feature-updates-using-custom-action-scripts/">Windows 10 Feature Updates – Using Custom Action Scripts</a>
                                        </li>
                                    
                                        <li class=" menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                            <a href="/2019/08/25/windows-10-feature-updates-using-setupconfig-ini-to-manage-feature-updates-in-the-enterprise/">Windows 10 Feature Updates – Using Setupconfig.ini to Manage Feature Updates in the Enterprise</a>
                                        </li>
                                    
                                </ul>
                            </li>
                        
                    
                        
                            <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                <a href="/2019/02/12/the-system-center-configuration-manager-adminservice-guide/">
                                    
                                    <span>ConfigMgr AdminService</span>
                                </a>
                            </li>
                        
                    
                        
                            <li class=" menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                <a href="#">
                                    
                                    <span>802.1x for OSD</span>
                                </a>
                                <ul class="sub-menu menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                    
                                        <li class=" menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                            <a href="/2018/07/29/configuring-802-1x-authentication-for-windows-deployment-part-1-building-an-802-1x-computer-authentication-script/">Part 1 – Building an 802.1x Computer Authentication Script</a>
                                        </li>
                                    
                                        <li class=" menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                            <a href="/2018/07/29/configuring-802-1x-authentication-for-windows-deployment-part-2-building-an-802-1x-enabled-winpe-boot-image/">Part 2 – Building an 802.1x Enabled WinPE Boot Image</a>
                                        </li>
                                    
                                        <li class=" menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                            <a href="/2018/07/29/configuring-802-1x-authentication-for-windows-deployment-part-3-integrating-802-1x-authentication-into-a-bare-metal-task-sequence/">Part 3 – Integrating 802.1x Authentication into a Bare Metal Task Sequence</a>
                                        </li>
                                    
                                        <li class=" menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                            <a href="/2018/07/29/configuring-802-1x-authentication-for-windows-deployment-part-4-integrating-802-1x-authentication-into-an-in-place-upgrade-task-sequence/">Part 4 – Integrating 802.1x Authentication into an In-Place Upgrade Task Sequence</a>
                                        </li>
                                    
                                        <li class=" menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                            <a href="/2018/09/29/configuring-802-1x-authentication-for-windows-deployment-part-5-dynamic-whitelisting-using-the-cisco-ise-external-restful-service/">Part 5 – Dynamic Whitelisting using the Cisco ISE External RESTful Service</a>
                                        </li>
                                    
                                        <li class=" menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                            <a href="/2018/07/29/configuring-802-1x-authentication-for-windows-deployment-tips-and-tricks/">Tips and Tricks</a>
                                        </li>
                                    
                                </ul>
                            </li>
                        
                    
                        
                            <li class="active menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                <a href="#">
                                    
                                    <span>Task Sequence Hacks</span>
                                </a>
                                <ul class="sub-menu menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                    
                                        <li class=" menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                            <a href="/2018/11/29/building-a-better-task-sequence/">Building a Better Task Sequence</a>
                                        </li>
                                    
                                        <li class=" menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                            <a href="/2019/04/30/building-a-smarter-task-sequence/">Building a Smarter Task Sequence</a>
                                        </li>
                                    
                                        <li class=" menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                            <a href="/2018/12/14/building-an-even-better-task-sequence/">Building An Even Better Task Sequence</a>
                                        </li>
                                    
                                        <li class=" menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                            <a href="/2018/07/16/clearing-local-group-policies-during-an-windows-7-to-10-in-place-upgrade-task-sequence/">Clearing Local Group Policies during an Windows 7 to 10 In-Place Upgrade Task Sequence</a>
                                        </li>
                                    
                                        <li class=" menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                            <a href="/2018/10/03/debugging-sccm-configmgr-task-sequences-on-the-fly/">Debugging SCCM/ConfigMgr Task Sequences on the Fly</a>
                                        </li>
                                    
                                        <li class="active menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                            <a href="/2018/07/11/dynamically-updating-unattend-xml-during-an-osd-task-sequence-using-mdt-variables-and-zti-scripts/">Dynamically Updating Unattend.XML during an OSD Task Sequence using MDT Variables and ZTI Scripts.</a>
                                        </li>
                                    
                                        <li class=" menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                            <a href="/2018/06/14/triggering-configmgr-client-actions-from-a-task-sequence/">Triggering ConfigMgr Client Actions from a Task Sequence</a>
                                        </li>
                                    
                                        <li class=" menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                            <a href="/2018/08/27/using-sccm-task-sequence-variables-as-scripts/">Using SCCM Task Sequence Variables as Scripts</a>
                                        </li>
                                    
                                </ul>
                            </li>
                        
                    
                        
                            <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                <a href="https://github.com/AdamGrossTX">
                                    
                                    <span>GitHub</span>
                                </a>
                            </li>
                        
                    
                        
                            <li class=" menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                <a href="#">
                                    
                                    <span>MORE&gt;</span>
                                </a>
                                <ul class="sub-menu menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                    
                                        <li class=" menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                            <a href="/about/">About</a>
                                        </li>
                                    
                                        <li class=" menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                            <a href="/consulting/">Consulting</a>
                                        </li>
                                    
                                        <li class=" menu-item menu-item-type-custom menu-item-object-custom menu-item-home">
                                            <a href="/contact/">Contact</a>
                                        </li>
                                    
                                </ul>
                            </li>
                        
                    
                
                </ul>
        </div>
        <div class="menu" id="menu-mobile"></div>
    </div>
    <div id="top-search">
        <a href="#" class="search"><i class="fa fa-search"></i></a>
        <div class="show-search">
            <form role="search" method="get" action="https://www.google.com/search" id="searchform">
                <input type="search" placeholder="Search and hit enter..." value="" name="s" id="s" title="Search and hit enter...">
                <input type="hidden" name="sitesearch" value="asquaredozen.com">
                <button type="submit" value="Search"/>
            </form>
        </div>
    </div>
</div>
				<header id="header" class="noslider">
	<div class="container">
		<div id="logo">
			<h1><a href="https://blog.asquaredozen.com"><img src="/img/A-Square-Dozen-Logo-BlogHeader-1.png" alt="A Square Dozen" /></a></h1>
		</div>
	</div>
</header>
				<div class="container">
					<div id="content">
						
<div id="main" class="fullwidth">
		<article class="post type-post status-publish format-standard has-post-thumbnail hentry">
			<div class="post-header">
				<h1>Dynamically Updating Unattend.XML during an OSD Task Sequence using MDT Variables and ZTI Scripts.</h1>
				<span class="post-date">July 11, 2018</span>
			</div>
			<div class="post-entry">
				<p>While trying to set the <strong>KeyboardLocale</strong> in my <strong>ConfigMgr</strong>/<strong>SCCM</strong> Task Sequence, I found that my settings weren&rsquo;t getting updated during the Task Sequence. I used to think that custom <strong>Unattend.XML</strong> that you include in your Task Sequence would be used <em>as-is</em>. I was wrong. I did a bit of digging and here&rsquo;s what I discovered.</p>
<p>FYI: I&rsquo;m using ConfigMgr/SCCM with MDT integrated and I&rsquo;m using an MDT Task Sequence built in ConfigMgr as the basis for this discussion. Depending on your setup, your mileage may vary.</p>
<p>During some early testing with my Windows 10 Task Sequence, I was adding sections to my Unattend.XML then finding that they were getting removed during the Task Sequence (See a previous post about <a href="http://www.asquaredozen.com/2018/01/16/modern-driver-management-barely-got-working-lessons-learned/">Modern Driver Management</a>). When you add the <em>Apply Operating System</em>, <em>Apply Windows Settings</em> or <em>Apply Network Settings</em> steps (among others) to your Task Sequence, everything in those steps is used later by the <em>Setup Windows and Configuration Manager</em> step in the form of command line arguments or updates to the configuration files such as Unattend.XML. If you start with a custom Unattend.XML file then have a conflicting entry in one of your steps, the Task Sequence step entries will overwrite the custom entry in your Unattend.XML file.</p>
<p>In addition to the native Task Sequence steps updating the your config files, MDT has a set of scripts that do all sorts of cool things. In my case, I have a custom UDI wizard that captures information and sets them as Task Sequence variables - you can also do this by using CustomSettings.INI or several other methods to set these variables - the end result being a set of variables that allow me to dynamically customize the image (<strong>TimeZone</strong>, <strong>KeyboardLocale</strong>, <strong>SiteCode</strong>, <strong>ComputerName</strong>, etc). Johan has some a short write up on how to create custom MDT variables <a href="https://deploymentresearch.com/Research/Post/365/Creating-custom-variables-in-MDT-2013">here</a>. By using MDT built-in variable names in CustomSettings.INI or in your script, the ZTI scripts will be able to pick these variables up and map them to the right places automatically. You can view the list of variables and mappings in the MDT Toolkit Under the Scripts folder (ZTIGather.xml and ZTIConfigure.xml).</p>
<p>Going into this, I knew about ZTIGather and the MDT variable names but honestly just thought ZTIGather was taking care of consuming the variables until I found this issue. As we&rsquo;ve been testing our Windows 10 task sequence, one of my colleagues from Belgium called and said the image was working, but their keyboard layout wasn&rsquo;t being set to Dutch (we leave the OS language set to English, just change the keyboard). I checked in our database and scripts and verified that we had the right locale and the KeyboardLocale variable was being populated properly. Then I checked the BDD.log and found the missing link. The BDD log compiles several ZTI logs into one, including ZTIGather and ZTIConfigure. What I found was the InputLocale and KeyboardLocale were being skipped by ZTIConfigure.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1">1</a></span><span style="color:#008080">&lt;![LOG[//unattend:settings[@pass</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;oobeSystem&#34;]/unattend:component[@name=&#34;Microsoft-Windows-International-Core&#34;]/unattend:InputLocale not found in C:\WINDOWS\panther\unattend\unattend.xml, unable to update.]LOG]!&gt;&lt;time=&#34;06:52:51.000+000&#34; date=&#34;07-10-2018&#34; component=&#34;zticonfigure&#34; context=&#34;&#34; type=&#34;1&#34; thread=&#34;&#34; file=&#34;zticonfigure&#34;&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="2"><a style="outline: none; text-decoration:none; color:inherit" href="#2">2</a></span><span style="color:#008080">&lt;![LOG[//unattend:settings[@pass</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;specialize&#34;]/unattend:component[@name=&#34;Microsoft-Windows-International-Core&#34;]/unattend:SystemLocale not found in C:\WINDOWS\panther\unattend\unattend.xml, unable to update.]LOG]!&gt;&lt;time=&#34;06:52:51.000+000&#34; date=&#34;07-10-2018&#34; component=&#34;zticonfigure&#34; context=&#34;&#34; type=&#34;1&#34; thread=&#34;&#34; file=&#34;zticonfigure&#34;&gt;</span>
</code></pre></div><p>I took a look at the <strong>ZTIConfigure.XML</strong> and found this section:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-XML" data-lang="XML"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1">1</a></span><span style="color:#000080">&lt;mapping</span> <span style="color:#008080">id=</span><span style="color:#d14">&#34;KeyboardLocale&#34;</span> <span style="color:#008080">type=</span><span style="color:#d14">&#34;xml&#34;</span><span style="color:#000080">&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="2"><a style="outline: none; text-decoration:none; color:inherit" href="#2">2</a></span>           <span style="color:#000080">&lt;xpath</span> <span style="color:#008080">removeIfBlank=</span><span style="color:#d14">&#34;Self&#34;</span><span style="color:#000080">&gt;</span><span style="color:#999;font-weight:bold;font-style:italic">&lt;![CDATA[//unattend:settings[@pass=&#34;specialize&#34;]/unattend:component[@name=&#34;Microsoft-Windows-International-Core&#34;]/unattend:InputLocale]]&gt;</span><span style="color:#000080">&lt;/xpath&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="3"><a style="outline: none; text-decoration:none; color:inherit" href="#3">3</a></span>           <span style="color:#000080">&lt;xpath</span> <span style="color:#008080">removeIfBlank=</span><span style="color:#d14">&#34;Self&#34;</span><span style="color:#000080">&gt;</span><span style="color:#999;font-weight:bold;font-style:italic">&lt;![CDATA[//unattend:settings[@pass=&#34;oobeSystem&#34;]/unattend:component[@name=&#34;Microsoft-Windows-International-Core&#34;]/unattend:InputLocale]]&gt;</span><span style="color:#000080">&lt;/xpath&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="4"><a style="outline: none; text-decoration:none; color:inherit" href="#4">4</a></span><span style="color:#000080">&lt;/mapping&gt;</span>
</code></pre></div><p>It shows me that if ZTIConfigure finds a variable named <strong>KeyboardLocale</strong> it will write the value of that variable into 2 locations inside Unattend.XML. If my KeyboardLocale variable was set to <strong>0813:00000813</strong> during the Task Sequence to change the default keyboard to Dutch for our Belgium office, then ZTIConfigure would look for <strong>specialize</strong> and <strong>oobeSystem</strong> sections in the Unattend.XML and update the <strong>InputLocale</strong> property to <strong>0813:00000813</strong> with the resulting entry being (<em>only InputLocale would change, showing the whole section for context</em>):</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-XML" data-lang="XML"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1"> 1</a></span><span style="color:#999;font-weight:bold;font-style:italic">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="2"><a style="outline: none; text-decoration:none; color:inherit" href="#2"> 2</a></span><span style="color:#000080">&lt;unattend</span> <span style="color:#008080">xmlns=</span><span style="color:#d14">&#34;urn:schemas-microsoft-com:unattend&#34;</span><span style="color:#000080">&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="3"><a style="outline: none; text-decoration:none; color:inherit" href="#3"> 3</a></span>    <span style="color:#000080">&lt;settings</span> <span style="color:#008080">pass=</span><span style="color:#d14">&#34;specialize&#34;</span><span style="color:#000080">&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="4"><a style="outline: none; text-decoration:none; color:inherit" href="#4"> 4</a></span>        <span style="color:#000080">&lt;component</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;Microsoft-Windows-International-Core&#34;</span> <span style="color:#008080">processorArchitecture=</span><span style="color:#d14">&#34;amd64&#34;</span> <span style="color:#008080">publicKeyToken=</span><span style="color:#d14">&#34;31bf3856ad364e35&#34;</span> <span style="color:#008080">language=</span><span style="color:#d14">&#34;neutral&#34;</span> <span style="color:#008080">versionScope=</span><span style="color:#d14">&#34;nonSxS&#34;</span> <span style="color:#008080">xmlns:wcm=</span><span style="color:#d14">&#34;http://schemas.microsoft.com/WMIConfig/2002/State&#34;</span> <span style="color:#008080">xmlns:xsi=</span><span style="color:#d14">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span><span style="color:#000080">&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="5"><a style="outline: none; text-decoration:none; color:inherit" href="#5"> 5</a></span>            <span style="color:#000080">&lt;InputLocale&gt;</span>0813:00000813<span style="color:#000080">&lt;/InputLocale&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="6"><a style="outline: none; text-decoration:none; color:inherit" href="#6"> 6</a></span>            <span style="color:#000080">&lt;SystemLocale&gt;</span>en-US<span style="color:#000080">&lt;/SystemLocale&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="7"><a style="outline: none; text-decoration:none; color:inherit" href="#7"> 7</a></span>            <span style="color:#000080">&lt;UILanguage&gt;</span>en-US<span style="color:#000080">&lt;/UILanguage&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="8"><a style="outline: none; text-decoration:none; color:inherit" href="#8"> 8</a></span>            <span style="color:#000080">&lt;UILanguageFallback&gt;</span>en-US<span style="color:#000080">&lt;/UILanguageFallback&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="9"><a style="outline: none; text-decoration:none; color:inherit" href="#9"> 9</a></span>            <span style="color:#000080">&lt;UserLocale&gt;</span>en-US<span style="color:#000080">&lt;/UserLocale&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="10"><a style="outline: none; text-decoration:none; color:inherit" href="#10">10</a></span>        <span style="color:#000080">&lt;/component&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="11"><a style="outline: none; text-decoration:none; color:inherit" href="#11">11</a></span>    <span style="color:#000080">&lt;/settings&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="12"><a style="outline: none; text-decoration:none; color:inherit" href="#12">12</a></span>    <span style="color:#000080">&lt;/settings&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="13"><a style="outline: none; text-decoration:none; color:inherit" href="#13">13</a></span>    <span style="color:#000080">&lt;settings</span> <span style="color:#008080">pass=</span><span style="color:#d14">&#34;oobeSystem&#34;</span><span style="color:#000080">&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="14"><a style="outline: none; text-decoration:none; color:inherit" href="#14">14</a></span>        <span style="color:#000080">&lt;component</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;Microsoft-Windows-International-Core&#34;</span> <span style="color:#008080">processorArchitecture=</span><span style="color:#d14">&#34;amd64&#34;</span> <span style="color:#008080">publicKeyToken=</span><span style="color:#d14">&#34;31bf3856ad364e35&#34;</span> <span style="color:#008080">language=</span><span style="color:#d14">&#34;neutral&#34;</span> <span style="color:#008080">versionScope=</span><span style="color:#d14">&#34;nonSxS&#34;</span> <span style="color:#008080">xmlns:wcm=</span><span style="color:#d14">&#34;http://schemas.microsoft.com/WMIConfig/2002/State&#34;</span> <span style="color:#008080">xmlns:xsi=</span><span style="color:#d14">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span><span style="color:#000080">&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="15"><a style="outline: none; text-decoration:none; color:inherit" href="#15">15</a></span>            <span style="color:#000080">&lt;InputLocale&gt;</span>0813:00000813<span style="color:#000080">&lt;/InputLocale&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="16"><a style="outline: none; text-decoration:none; color:inherit" href="#16">16</a></span>            <span style="color:#000080">&lt;SystemLocale&gt;</span>en-US<span style="color:#000080">&lt;/SystemLocale&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="17"><a style="outline: none; text-decoration:none; color:inherit" href="#17">17</a></span>            <span style="color:#000080">&lt;UILanguage&gt;</span>en-US<span style="color:#000080">&lt;/UILanguage&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="18"><a style="outline: none; text-decoration:none; color:inherit" href="#18">18</a></span>            <span style="color:#000080">&lt;UILanguageFallback&gt;</span>en-US<span style="color:#000080">&lt;/UILanguageFallback&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="19"><a style="outline: none; text-decoration:none; color:inherit" href="#19">19</a></span>            <span style="color:#000080">&lt;UserLocale&gt;</span>en-US<span style="color:#000080">&lt;/UserLocale&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="20"><a style="outline: none; text-decoration:none; color:inherit" href="#20">20</a></span>        <span style="color:#000080">&lt;/component&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="21"><a style="outline: none; text-decoration:none; color:inherit" href="#21">21</a></span>    <span style="color:#000080">&lt;/settings&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="22"><a style="outline: none; text-decoration:none; color:inherit" href="#22">22</a></span><span style="color:#000080">&lt;/unattend&gt;</span>
</code></pre></div><p>The resulting output in the BDD.log will be something like this:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="1"><a style="outline: none; text-decoration:none; color:inherit" href="#1">1</a></span><span style="color:#008080">&lt;![LOG[Updated C:\WINDOWS\panther\unattend\unattend.xml with KeyboardLocale</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">0813:00000813 (value was 0409:00000409)]LOG]!&gt;&lt;time=&#34;07:38:13.000+000&#34; date=&#34;07-11-2018&#34; component=&#34;zticonfigure&#34; context=&#34;&#34; type=&#34;1&#34; thread=&#34;&#34; file=&#34;zticonfigure&#34;&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="2"><a style="outline: none; text-decoration:none; color:inherit" href="#2">2</a></span><span style="color:#008080">&lt;![LOG[Updated C:\WINDOWS\panther\unattend\unattend.xml with KeyboardLocale</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">0813:00000813 (value was 0409:00000409)]LOG]!&gt;&lt;time=&#34;07:38:13.000+000&#34; date=&#34;07-11-2018&#34; component=&#34;zticonfigure&#34; context=&#34;&#34; type=&#34;1&#34; thread=&#34;&#34; file=&#34;zticonfigure&#34;&gt;</span>
</code></pre></div><p>Here&rsquo;s the part that I was missing. <strong>If my custom Unattend.XML file that I specified in my Task Sequence doesn&rsquo;t already have a default entry, the above steps get skipped</strong>. After digging through the ZTIConfigure script, I was able to verify that the script will skip any variables (well not all, there are defaults that always get mapped) that don&rsquo;t exist in your Unattend.XML. So the morale of the story is, if you are using ZTIGather and ZTIConfigure in your Task Sequence, be sure to check out the mapping that the scripts perform and ensure you have placeholder entries in your Unattend.XML or the entries won&rsquo;t get updated.</p>

			</div>
			
			<script src="https://utteranc.es/client.js"
				repo="AdamGrossTX/asquaredozen"
				issue-term="title"
				label="blog comment"
				theme="github-light"
				crossorigin="anonymous"
				async>
			</script>
		</article>
</div>

					</div>
				</div>
				<footer id="footer">
	<div class="container">
		<div id="footer-copyright">
			<p class="copyright">&copy; 2021 Adam Gross - https://blog.asquaredozen.com - A Square Dozen</a></p>
		</div>
	</div>
</footer>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="css/SlickNav/jquery.slicknav.js"></script>
			</div>
		</body>
</html>
